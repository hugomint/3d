{{ define "title" }}
{{ .Title }} &ndash; {{ .Site.Title }}
{{ end }}

<!DOCTYPE HTML>
<html>

<head>
  <title>{{ block "title" . }}{{ end }}</title>
  <meta charset="utf-8" />

  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <meta name="author" content={{ .Site.Params.authorName }} />
  <meta name="description" content="{{ with .Site.Params.description }}{{ . }}{{ end }}">
  <meta name="keywords" content="{{ with .Site.Params.keywords }}{{ . }}{{ end }}">

  {{ hugo.Generator }}

  {{ $u := .Site.Params.mainsiteURL | safeHTML}}
  {{ $g := .Site.Params.image | safeHTML}}
  {{ $y := (print $u $g) }}
  <!-- JSON-LD markup generated by Google Structured Data Markup Helper. -->
  <script type="application/ld+json">
  {
    "@context" : "http://schema.org",
    "@type" : "Article",
    "datePublished" : "{{ now.Format "2006-1-2" }}",
    "image" : {{ $y }},
    "articleBody" : {{ .Site.Params.text | replaceRE "[<p></p>]" "$1" | truncate 220 }},
    "url" : {{ .Site.Params.mainsiteURL | safeHTML }}
  }
  </script>

  {{ "<!--Favicon-->" | safeHTML }}
  <link rel="shortcut icon" href="{{ index (shuffle .Site.Params.style.favicon) 0 | absURL }}" type="image/x-icon">
  <link rel="icon" href="{{ index (shuffle .Site.Params.style.favicon) 0 | absURL }}" type="image/x-icon">

  {{ "<!-- google analitycs -->" | safeHTML }}
  {{ with .Site.Params.google_analitycs_id }}
  <script>
    (function (i, s, o, g, r, a, m) {
      i['GoogleAnalyticsObject'] = r;
      i[r] = i[r] || function () {
        (i[r].q = i[r].q || []).push(arguments)
      }, i[r].l = 1 * new Date();
      a = s.createElement(o),
        m = s.getElementsByTagName(o)[0];
      a.async = 1;
      a.src = g;
      m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
    ga('create', '{{ . }}', 'auto');
    ga('send', 'pageview');
  </script>
  {{ end }}

  <!-- Google Tag Manager -->
  {{ with .Site.Params.google_tag_manager}}
  <script>
    (function (w, d, s, l, i) {
      w[l] = w[l] || [];
      w[l].push({
        'gtm.start': new Date().getTime(),
        event: 'gtm.js'
      });
      var f = d.getElementsByTagName(s)[0],
        j = d.createElement(s),
        dl = l != 'dataLayer' ? '&l=' + l : '';
      j.async = true;
      j.src =
        'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
      f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', '{{ . }}');
  </script>
  {{ end }}
  <!-- End Google Tag Manager -->

  <link rel="stylesheet" type="text/css" href="/assets/css/font-awesome.min.css">
  <!--[if lte IE 8]><script src="/assets/js/ie/html5shiv.js"></script><![endif]-->
  {{ "<!-- Main Stylesheet -->" | safeHTML }}
  {{ $styles := resources.Get "sass/main.scss" | toCSS | minify }}
  <link rel="stylesheet" href="{{ $styles.Permalink }}" media="screen">
  <!--[if lte IE 9]><link rel="stylesheet" href="/assets/css/ie9.css" /><![endif]-->
  <!--[if lte IE 8]><link rel="stylesheet" href="/assets/css/ie8.css" /><![endif]-->
</head>